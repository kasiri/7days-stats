<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking â€” El Ãšltimo Amanecer</title>

    <link rel="stylesheet" href="style.css?v=7">
</head>

<body>

<header class="navbar">
    <div class="logo">EL ÃšLTIMO AMANECER</div>
    <nav>
        <a href="index.html">ğŸ  Inicio</a>
        <a href="stats.html">ğŸ“Š Estado</a>
        <a href="ranking.html">ğŸ… Ranking</a>
        <a href="mods.html">ğŸ§© Mods</a>
        <a href="staff.html">ğŸ‘¥ Staff</a>
        <a href="wipe.html">ğŸ”¥ Wipe</a>
        <a href="normas.html">ğŸ“œ Normas</a>
        <a href="bot.html">ğŸ¤– Bot</a>
    </nav>
</header>



<div class="container">

    <h1 class="page-title">Ranking de Jugadores</h1>

    <div class="card">
        <table class="table">
            <thead>
                <tr>
                    <th>Jugador</th>
                    <th>Nivel</th>
                    <th>Zombies</th>
                    <th>Muertes</th>
                </tr>
            </thead>
            <tbody id="rankingTable"></tbody>
        </table>
    </div>

</div>

<script src="main.js"></script>
<footer class="footer">
    <div class="footer-content">
        <p>Â© 2026 El Ãšltimo Amanecer â€” Comunidad 7 Days to Die</p>
        <div class="footer-links">
            <a href="https://discord.gg/SaZdsmvJsg" target="_blank">ğŸ’¬ Discord</a>
            <a href="https://twitter.com/Kasiri93" target="_blank">ğŸ¦ Twitter</a>
            <a href="https://twitch.tv/Kasiri" target="_blank">ğŸ® Twitch</a>
            <a href="https://www.youtube.com/@kasiri93" target="_blank">ğŸ® Youtube</a>
        </div>
    </div>
</footer>
<script>
document.addEventListener("DOMContentLoaded", () => {

    const table = document.querySelector("table");
    const theadRow = table.querySelector("thead tr");
    const tbody = table.querySelector("tbody");

    // AÃ‘ADIR COLUMNA "Progreso" AUTOMÃTICAMENTE
    const th = document.createElement("th");
    th.innerText = "Progreso";
    theadRow.insertBefore(th, theadRow.children[3]); // despuÃ©s de Nivel

    // AÃ‘ADIR CELDAS DE PROGRESO A CADA FILA
    function addProgressBars() {
        tbody.querySelectorAll("tr").forEach(row => {
            const nivelCell = row.children[2];
            const nivel = parseInt(nivelCell.innerText.trim());

            const td = document.createElement("td");
            td.innerHTML = `
                <div class="progress">
                    <div class="bar"></div>
                </div>
            `;

            row.insertBefore(td, row.children[3]);

            // Rellenar barra
            const bar = td.querySelector(".bar");
            const porcentaje = Math.min((nivel / 100) * 100, 100);
            bar.style.width = porcentaje + "%";
        });
    }

    // ORDENAR SIEMPRE POR NIVEL AL CARGAR
    function ordenarPorNivel() {
        const rows = Array.from(tbody.querySelectorAll("tr"));

        rows.sort((a, b) => {
            const lvlA = parseInt(a.children[2].innerText.trim());
            const lvlB = parseInt(b.children[2].innerText.trim());
            return lvlB - lvlA;
        });

        tbody.innerHTML = "";
        rows.forEach((row, index) => {
            // MEDALLAS
            const posCell = row.children[0];
            if (index === 0) posCell.innerHTML = "ğŸ¥‡";
            else if (index === 1) posCell.innerHTML = "ğŸ¥ˆ";
            else if (index === 2) posCell.innerHTML = "ğŸ¥‰";
            else posCell.innerHTML = index + 1;

            tbody.appendChild(row);
        });
    }

    // ORDENAR POR CUALQUIER COLUMNA (flechas)
    let sortDirection = true;
    document.querySelectorAll("th").forEach((th, index) => {
        th.style.cursor = "pointer";
        th.addEventListener("click", () => {
            const rows = Array.from(tbody.querySelectorAll("tr"));

            rows.sort((a, b) => {
                const A = a.children[index].innerText.trim();
                const B = b.children[index].innerText.trim();

                const numA = parseFloat(A);
                const numB = parseFloat(B);

                if (!isNaN(numA) && !isNaN(numB)) {
                    return sortDirection ? numA - numB : numB - numA;
                }

                return sortDirection
                    ? A.localeCompare(B)
                    : B.localeCompare(A);
            });

            sortDirection = !sortDirection;

            tbody.innerHTML = "";
            rows.forEach(row => tbody.appendChild(row));
        });
    });

    // EJECUTAR TODO
    addProgressBars();
    ordenarPorNivel();

});
</script>







    
</body>
</html>
