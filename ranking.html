<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking â€” El Ãšltimo Amanecer</title>

    <link rel="stylesheet" href="style.css?v=7">
</head>

<body>

<header class="navbar">
    <div class="logo">EL ÃšLTIMO AMANECER</div>
    <nav>
        <a href="index.html">ğŸ  Inicio</a>
        <a href="stats.html">ğŸ“Š Estado</a>
        <a href="ranking.html">ğŸ… Ranking</a>
        <a href="mods.html">ğŸ§© Mods</a>
        <a href="staff.html">ğŸ‘¥ Staff</a>
        <a href="wipe.html">ğŸ”¥ Wipe</a>
        <a href="normas.html">ğŸ“œ Normas</a>
        <a href="bot.html">ğŸ¤– Bot</a>
    </nav>
</header>

<div class="container">

    <h1 class="page-title">Ranking de Jugadores</h1>

<div id="podio" class="podio-container">
    <div class="podio-item oro">
        <div class="puesto">ğŸ¥‡</div>
        <div class="nombre" id="podio-1"></div>
        <div class="nivel" id="podio-1-nivel"></div>
    </div>

    <div class="podio-item plata">
        <div class="puesto">ğŸ¥ˆ</div>
        <div class="nombre" id="podio-2"></div>
        <div class="nivel" id="podio-2-nivel"></div>
    </div>

    <div class="podio-item bronce">
        <div class="puesto">ğŸ¥‰</div>
        <div class="nombre" id="podio-3"></div>
        <div class="nivel" id="podio-3-nivel"></div>
    </div>
</div>





    
    <div class="card">
        <table class="table">
            <thead>
                <tr>
                    <th>Jugador</th>
                    <th>Nivel</th>
                    <th>Zombies</th>
                    <th>Muertes</th>
                </tr>
            </thead>
            <tbody id="rankingTable"></tbody>
        </table>
    </div>

</div>

<script src="main.js"></script>
<script>
const tbody = document.querySelector("#rankingTable");

// Observa SIEMPRE los cambios del servidor
const observer = new MutationObserver(() => {
    if (tbody.children.length > 0) {
        setTimeout(() => {
            aplicarOrdenYDecoracion();
        }, 50);
    }
});

observer.observe(tbody, { childList: true });

function aplicarOrdenYDecoracion() {
    const table = document.querySelector("table");
    const headers = table.querySelectorAll("th");

    ordenarPorColumna(1, false); // Orden por nivel
    decorar();
    actualizarPodio(); // â† AQUÃ SE ACTUALIZA EL PODIO

    headers.forEach((th, index) => {
        th.style.cursor = "pointer";
        th.onclick = () => {
            sortDirection = !sortDirection;
            ordenarPorColumna(index, true);
            decorar();
            actualizarPodio(); // â† Y AQUÃ TAMBIÃ‰N
        };
    });
}

let sortDirection = false; // false = descendente

function ordenarPorColumna(colIndex, toggle) {
    const rows = Array.from(tbody.querySelectorAll("tr"));

    if (toggle) sortDirection = !sortDirection;

    rows.sort((a, b) => {
        const A = a.children[colIndex].innerText.trim();
        const B = b.children[colIndex].innerText.trim();

        const numA = parseFloat(A);
        const numB = parseFloat(B);

        if (!isNaN(numA) && !isNaN(numB)) {
            return sortDirection ? numA - numB : numB - numA;
        }

        return sortDirection
            ? A.localeCompare(B)
            : B.localeCompare(A);
    });

    tbody.innerHTML = "";
    rows.forEach(row => tbody.appendChild(row));
}

function decorar() {
    const rows = tbody.querySelectorAll("tr");

    rows.forEach((row, index) => {
        const lvl = parseInt(row.children[1].innerText.trim());
        const nameCell = row.children[0];

        // Quitar medallas previas
        nameCell.innerText = nameCell.innerText.replace(/^ğŸ¥‡ |^ğŸ¥ˆ |^ğŸ¥‰ /, "");

        // Medallas
        if (index === 0) nameCell.innerText = "ğŸ¥‡ " + nameCell.innerText;
        else if (index === 1) nameCell.innerText = "ğŸ¥ˆ " + nameCell.innerText;
        else if (index === 2) nameCell.innerText = "ğŸ¥‰ " + nameCell.innerText;

        // Colores por nivel
        if (lvl >= 60) row.style.color = "#ff4d4d";
        else if (lvl >= 40) row.style.color = "#b266ff";
        else if (lvl >= 20) row.style.color = "#4da6ff";
        else row.style.color = "#66ff66";
    });
}

function actualizarPodio() {
    const rows = tbody.querySelectorAll("tr");

    if (rows.length < 3) return;

    const top1 = rows[0];
    const top2 = rows[1];
    const top3 = rows[2];

    // Jugadores
    document.getElementById("podio-1").innerText =
        top1.children[0].innerText.replace(/^ğŸ¥‡ /, "");

    document.getElementById("podio-2").innerText =
        top2.children[0].innerText.replace(/^ğŸ¥ˆ /, "");

    document.getElementById("podio-3").innerText =
        top3.children[0].innerText.replace(/^ğŸ¥‰ /, "");

    // Niveles
    document.getElementById("podio-1-nivel").innerText =
        "Nivel " + top1.children[1].innerText;

    document.getElementById("podio-2-nivel").innerText =
        "Nivel " + top2.children[1].innerText;

    document.getElementById("podio-3-nivel").innerText =
        "Nivel " + top3.children[1].innerText;
}
</script>




<footer class="footer">
    ...
</footer>


    
<footer class="footer">
    <div class="footer-content">
        <p>Â© 2026 El Ãšltimo Amanecer â€” Comunidad 7 Days to Die</p>
        <div class="footer-links">
            <a href="https://discord.gg/SaZdsmvJsg" target="_blank">ğŸ’¬ Discord</a>
            <a href="https://twitter.com/Kasiri93" target="_blank">ğŸ¦ Twitter</a>
            <a href="https://twitch.tv/Kasiri" target="_blank">ğŸ® Twitch</a>
            <a href="https://www.youtube.com/@kasiri93" target="_blank">ğŸ® Youtube</a>
        </div>
    </div>
</footer>



    
</body>
</html>
